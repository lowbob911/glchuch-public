{"version":3,"sources":["webpack:///./src/pages/index.js","webpack:///./assets/img/church.jpg"],"names":["Home","useState","publications","setPublications","useEffect","fetch","process","then","response","json","resultData","forEach","publication","publidhedDate","Date","published_at","sort","a","b","reverse","className","map","key","_id","to","src","previewImage","url","churchImg","alt","label","Intl","DateTimeFormat","timeZone","format","dangerouslySetInnerHTML","__html","showdown","Converter","makeHtml","description","module","exports"],"mappings":"4FAAA,sJAOe,SAASA,IAAQ,IAAD,EACaC,mBAAS,IAA1CC,EADoB,KACNC,EADM,KAc3B,OAXAC,qBAAU,WACNC,MAASC,yCACJC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACFA,EAAWC,SAAQ,SAAAC,GAChBA,EAAYC,cAAgB,IAAIC,KAAKF,EAAYG,iBAEpDZ,EAAgBO,EAAWM,MAAK,SAACC,EAAEC,GAAH,OAAUD,EAAEJ,cAAgBK,EAAEL,cAAiB,EAAMK,EAAEL,cAAgBI,EAAEJ,eAAkB,EAAI,KAAIM,gBAE5I,IAGC,kBAAC,IAAD,KACI,yBAAKC,UAAU,eACX,wBAAIA,UAAU,cAAd,YAIJ,yBAAKA,UAAU,YACVlB,EAAamB,KAAI,SAAAT,GAAW,aACzB,yBAAKQ,UAAU,SAASE,IAAG,QAAUV,EAAYW,KAC7C,yBAAKH,UAAU,oBACX,yBAAKA,UAAU,+BACX,kBAAC,IAAD,CAAMI,GAAE,mBAAqBZ,EAAYW,KACrC,yBAAKE,KAAKb,SAAA,UAAAA,EAAac,oBAAb,eAA2BC,MAAOC,IACvCC,IAAKjB,EAAYkB,UAI9B,yBAAKV,UAAU,oBACX,6BACI,0BAAMA,UAAU,oBACX,IAAIW,KAAKC,eAAe,QAAS,CAACC,SAAU,oBAAoBC,OAAO,IAAIpB,KAAKF,EAAYG,gBAEjG,kBAAC,IAAD,CAAMS,GAAE,mBAAqBZ,EAAYW,KACrC,0BAAMH,UAAU,qBAAqBR,EAAYkB,SAGzD,yBAAKK,wBAAyB,CAACC,QAAQ,IAAIC,IAASC,WAAYC,SAAS3B,EAAY4B,0B,qBChDrHC,EAAOC,QAAU,IAA0B","file":"component---src-pages-index-js-a7e6c289ac3c8bca21de.js","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport BasicWrapper from \"../components/BasicWrapper\";\r\nimport churchImg from \"../../assets/img/church.jpg\";\r\nimport showdown from \"showdown\";\r\nimport {Link} from \"gatsby\";\r\n\r\nexport default function Home() {\r\n    const [publications, setPublications] = useState([]);\r\n\r\n    useEffect(() => {\r\n        fetch(`${process.env.GATSBY_API_URL}/publications`)\r\n            .then(response => response.json())\r\n            .then(resultData => {\r\n                resultData.forEach(publication => {\r\n                   publication.publidhedDate = new Date(publication.published_at);\r\n                });\r\n                setPublications(resultData.sort((a,b) => (a.publidhedDate > b.publidhedDate) ? 1 : ((b.publidhedDate > a.publidhedDate) ? -1 : 0)).reverse());\r\n            })\r\n    }, []);\r\n\r\n    return (\r\n        <BasicWrapper>\r\n            <div className=\"text-center\">\r\n                <h1 className=\"main-color\">\r\n                    Новости\r\n                </h1>\r\n            </div>\r\n            <div className=\"row mt-3\">\r\n                {publications.map(publication => (\r\n                    <div className=\"col-12\" key={`test_${publication._id}`}>\r\n                        <div className=\"publication-item\">\r\n                            <div className=\"publication-img text-center\">\r\n                                <Link to={`/publication?id=${publication._id}`}>\r\n                                    <img src={publication?.previewImage?.url || churchImg}\r\n                                         alt={publication.label}\r\n                                    />\r\n                                </Link>\r\n                            </div>\r\n                            <div className=\"publication-info\">\r\n                                <div>\r\n                                    <span className=\"publication-time\">\r\n                                        {new Intl.DateTimeFormat('RU-ru', {timeZone: \"Europe/Helsinki\"}).format(new Date(publication.published_at))}\r\n                                    </span>\r\n                                    <Link to={`/publication?id=${publication._id}`}>\r\n                                        <span className=\"publication-label\">{publication.label}</span>\r\n                                    </Link>\r\n                                </div>\r\n                                <div dangerouslySetInnerHTML={{__html: new showdown.Converter().makeHtml(publication.description)}} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </BasicWrapper>\r\n    )\r\n}\r\n\r\n","module.exports = __webpack_public_path__ + \"static/church-5d1e308030c5789756b8c04addd814eb.jpg\";"],"sourceRoot":""}